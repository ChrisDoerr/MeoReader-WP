MeoReader.Reader={data:{totalPage:1},active:false,currentEntry:{}};MeoReader.Reader.markElementAsRead=function(element){element.removeClass("unread").addClass("read");element.find("a.action.unread").removeClass("unread").addClass("read");};MeoReader.Reader.markElementAsUnRead=function(element){element.removeClass("read").addClass("unread");};MeoReader.Reader.toggleEntry=function(element){var entryID=element.attr("data-entryID"),currentContent='.MeoReader_Reader_content[data-entryID="'+entryID+'"]',currentElement=jQuery(currentContent),offsetElement=currentElement.prev(".MeoReader_Reader_item");jQuery(".MeoReader_Reader_content").not(currentContent).hide();currentElement.toggle();if(currentElement.css("display")!=="none"){jQuery("html,body").animate({scrollTop:(offsetElement.offset().top-offsetElement.height())},0);jQuery.post(ajaxurl,{action:"meoReader",method:"markEntryAsRead",entryID:entryID,meoNonce:MeoReader.nonce.get("meoReader_markEntryAsRead")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){MeoReader.Reader.updateUnreadButton();}});}};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click",".MeoReader_Reader_item",function(){MeoReader.Reader.toggleEntry(jQuery(this));MeoReader.Reader.markElementAsRead(jQuery(this));return false;});}else{jQuery(document).delegate(".MeoReader_Reader_item","click",function(){MeoReader.Reader.toggleEntry(jQuery(this));MeoReader.Reader.markElementAsRead(jQuery(this));return false;});}MeoReader.Reader.categories=(function(){var categories=[],elements=jQuery(".tab_category ul li a"),i=0,data={},temp={};for(i=0;i<elements.length;i++){temp=jQuery(elements[i]);data={id:temp.attr("data-cid"),name:temp.html()};categories.push(data);}return categories;}());(function(){var listWidth=jQuery(".tab_category ul").width(),tabCat=jQuery(".tab_category"),tabWidth=tabCat.width(),maxWidth=0;maxWidth=(listWidth>tabWidth)?listWidth:tabWidth;maxWidth+=10;tabCat.width(maxWidth);jQuery(".tab_category li").width(maxWidth);}());MeoReader.Reader.sortCategories=function(){var elements=jQuery(".tab_category ul li").remove();elements.sort(function(a,b){return(jQuery(a).children("a").html().toLowerCase()>jQuery(b).children("a").html().toLowerCase())?1:-1;});elements.appendTo(".tab_category ul");};MeoReader.Reader.selectCategory=function(selectedItem){var currentItem=jQuery(".tab_category > a"),currentItemID=currentItem.attr("data-cid"),currentItemName=currentItem.html(),selectedItemID=selectedItem.attr("data-cid"),selectedItemName=selectedItem.html();currentItem.attr("data-cid",selectedItemID);currentItem.html(selectedItemName);selectedItem.attr("data-cid",currentItemID);selectedItem.html(currentItemName);MeoReader.Reader.sortCategories();MeoReader.Reader.updateEntryListView(true);jQuery.post(ajaxurl,{action:"meoReader",method:"setCategoryAsCurrentTab",catID:selectedItemID,meoNonce:MeoReader.nonce.get("meoReader_setCategoryAsCurrentTab")},function(){return true;});};MeoReader.Reader.updatePrevNextView=function(){var currentPage=parseInt(jQuery("#MeoReader_Reader_List").attr("data-pagenr"),10),html="";if(currentPage>1){html+=' <div class="next">&#171; <a href="admin.php?page=meoreader_index&amp;pageNr='+(currentPage-1)+'">'+MeoReader.i18n.get("Newer Entries")+"</a></div>\n";}if(currentPage<MeoReader.Reader.data.totalPages){html+=' <div class="prev"><a href="admin.php?page=meoreader_index&amp;pageNr='+(currentPage+1)+'">'+MeoReader.i18n.get("Older Entries")+"</a> &#187;</div>\n";}html+=' <div class="clearAll">&nbsp;</div>\n';jQuery(".prevNext").html(html);};MeoReader.Reader.updatePrevNext=function(){var catID=jQuery(".tab_category > a").attr("data-cid");jQuery.post(ajaxurl,{action:"meoReader",method:"getTotalNumberOfPages",catID:catID},function(response){var data=jQuery.parseJSON(response);MeoReader.Reader.data.totalPages=(undefined!==data.totalPages&&data.totalPages>0)?data.totalPages:1;MeoReader.Reader.updatePrevNextView();});};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click",".tab_category ul li a",function(){MeoReader.Reader.selectCategory(jQuery(this));return false;});}else{jQuery(document).delegate(".tab_category ul li a","click",function(){MeoReader.Reader.selectCategory(jQuery(this));return false;});}audiojs.events.ready(function(){audiojs.createAll();});MeoReader.createAudioJS=function(){var audios=document.getElementsByTagName("audio");audiojs.createAll(audios);};MeoReader.Reader.generateEntryListHTML=function(data){var html="",media="",typeClass="",iframeFree="",i=0,n=0,archive="false",twitter="",user="",userCanPublish=false,tmpContent="";if(jQuery("#MeoReader_Reader_List").hasClass("archive")){archive="true";}if(undefined!==data.entries&&data.entries.length>0){for(i=0;i<data.entries.length;i++){if(data.entries[i].enclosures!==undefined&&data.entries[i].enclosures!==""){media+='<ul class="MeoReader_Reader_media">\n';for(n=0;n<data.entries[i].enclosures.length;n++){typeClass=(undefined!==data.entries[i].enclosures[n].type)?data.entries[i].enclosures[n].type.match(/([^\/]+)\//i):"";typeClass=(undefined!==typeClass[1])?typeClass[1]:"";media+=' <li class="'+typeClass+'"><a href="'+data.entries[i].enclosures[n].url+'" title="'+data.entries[i].enclosures[n].url+'">'+data.entries[i].enclosures[n].filename+"</a>";if(undefined!==MeoReader.settings.audioplayer&&MeoReader.settings.audioplayer===true&&typeClass==="audio"){media+='</li><li><audio src="'+data.entries[i].enclosures[n].url+'" preload="none" />';}media+="</li>\n";}media+="</ul>\n\n";}tmpContent=(undefined!==MeoReader.settings.purify&&MeoReader.settings.purify===true&&undefined!==data.entries[i].description_prep)?data.entries[i].description_prep:data.entries[i].description;iframeFree=tmpContent.replace(/<iframe/im,'<div class="meoReader_placeholderWrap"><p>Show External Content</p><div class="meoReader_placeholder"><!--[MeoReader]<iframe');iframeFree=iframeFree.replace(/<\/iframe>/im,"</iframe>[/MeoReader]--></div></div>");html+='    <div class="MeoReader_Reader_item '+data.entries[i].status+'" data-entryID="'+data.entries[i].id+'">\n';html+='     <table class="MeoReader_Reader_item_listView">\n';html+="      <tr>";html+='       <td class="MeoReader_Reader_action"><a href="admin.php?page=meoreader_toggleArchive&amp;itemID='+data.entries[i].id+"&amp;pageNr="+data.entries[i].pageNr+"&amp;meoNonce="+MeoReader.nonce.get("meoReader_toggleArchiveItem")+'" data-entryID="'+data.entries[i].id+'" class="action archive '+archive+'" title="'+MeoReader.i18n.get("Add to Archive")+'">A</a> \n';html+='       <a href="admin.php?page=meoreader_toggleRead&amp;itemID='+data.entries[i].id+"&amp;pageNr="+data.entries[i].pageNr+"&amp;meoNonce="+MeoReader.nonce.get("meoReader_toggleRead")+'" data-entryID="'+data.entries[i].id+'" class="action '+data.entries[i].status+'" title="'+MeoReader.i18n.get("Toggle Read/Unread Status")+'">R</a></td>\n';html+='       <td class="MeoReader_Reader_feedName"><img src="'+MeoReader.settings.url+"favicons.php?url="+encodeURIComponent(data.entries[i].feed_html_url)+'" alt="" class="favicon" /> '+MeoReader.Reader.shortenText(data.entries[i].feed_name,30)+"</td>\n";html+='       <td class="MeoReader_Reader_entryTitle"><a href="admin.php?page=meoreader_viewEntry&amp;itemID='+data.entries[i].id+"&amp;pageNr="+data.entries[i].pageNr+'">'+data.entries[i].title+"</a></td>\n";html+='       <td class="MeoReader_Reader_entryDateTime">'+MeoReader.Reader.shortenDate(data.entries[i].pub_date)+"</td>\n";html+="      </tr>";html+="     </table><!-- end .MeoReader_Reader_item_listView -->\n";html+="    </div><!-- end .MeoReader_Reader_item -->\n";html+='    <div class="MeoReader_Reader_content" data-entryID="'+data.entries[i].id+'" id="entryID'+data.entries[i].id+'">\n';if(undefined!==data.entries[i].link&&data.entries[i].link!==""){html+='     <h3><a href="'+data.entries[i].link+'">'+data.entries[i].title+"</a></h3>\n";}else{html+="     <h3>"+data.entries[i].title+"</h3>\n";}if(undefined!==data.entries[i].feed_html_url&&data.entries[i].feed_html_url!==""){html+='     <h4>by <a href="'+data.entries[i].feed_html_url+'">'+data.entries[i].feed_name+"</a></h4>\n";}else{html+="     <h4>by "+data.entries[i].feed_name+"</h4>\n";}html+=iframeFree+"\n";html+=media;twitter=(data.twitter!=="undefined"&&data.twitter!=="")?"&via="+encodeURIComponent(data.twitter):"";html+='     <div class="meoReader_entryToolbar" data-entryID="'+data.entries[i].id+'">';user=(data.user!=="undefined"&&(data.user==="master"||data.user==="singleUser"))?data.user:"noone";if(user==="master"){userCanPublish=true;}if(user==="singleUser"&&data.userCanPublish!=="undefined"&&data.userCanPublish===true){userCanPublish=true;}if(userCanPublish===true){html+='      <a href="javascript:void(0);" class="button-secondary meoReader_createPostFromEntry"><span>&nbsp;</span> '+MeoReader.i18n.get("Create Post From Entry")+"</a>\n";}html+='      <a href="http://twitter.com/share?text='+encodeURIComponent(data.entries[i].title)+twitter+"&url="+encodeURIComponent(data.entries[i].link)+'" class="button-secondary meoReader_shareEntryOnTwitter"><span>t</span> '+MeoReader.i18n.get("Share this on Twitter")+"</a>\n";html+='      <a href="http://www.facebook.com/sharer.php?s=100&p[url]='+encodeURIComponent(data.entries[i].link)+"&p[title]="+encodeURIComponent(data.entries[i].title)+'" class="button-secondary meoReader_shareEntryOnFacebook"><span>fb</span> '+MeoReader.i18n.get("Share this on Facebook")+"</a>\n";html+="     </div>\n";html+="    </div>\n";html+="\n\n";iframeFree="";media="";}}else{html="<p><i>"+MeoReader.i18n.get("No entries")+".</i></p>\n";}return html;};MeoReader.Reader.shortenText=function(text,maxLength){maxLength=parseInt(maxLength,10);if(text.length>maxLength){text=text.substring(0,maxLength)+"...";}return text;};MeoReader.Reader.shortenDate=function(dateString){var today=new Date(),todayStamp=new Date(today.getFullYear(),today.getMonth(),today.getDate(),0,0,0).getTime(),dateString_hours=parseInt(dateString.substring(11,13),10)-1,dateString_minutes=parseInt(dateString.substring(14,16),10)-1,dateStamp=new Date(dateString.substring(0,4),parseInt(dateString.substring(5,7),10)-1,dateString.substring(8,11),dateString_hours,dateString_minutes,0).getTime(),properFormat="";if(todayStamp<dateStamp){properFormat=dateString.substring(11,16);}else{properFormat=dateString;}return properFormat;};MeoReader.Reader.markAllItemsAsRead=function(){jQuery.post(ajaxurl,{action:"meoReader",method:"markAllEntriesAsRead",meoNonce:MeoReader.nonce.get("meoReader_markAllAsRead")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){MeoReader.Reader.updateEntryListView();}});};MeoReader.Reader.updateEntryListView=function(newCat){var listElement=jQuery("#MeoReader_Reader_List"),pageNr=(undefined!==newCat&&newCat===true)?1:jQuery("#MeoReader_Reader_List").attr("data-pagenr");if(pageNr===1){jQuery("#MeoReader_Reader_List").attr("data-pagenr","1");}if(!jQuery("#MeoReader_Reader_List").hasClass("archive")){jQuery.post(ajaxurl,{action:"meoReader",method:"getEntryList",pageNr:pageNr,catID:jQuery(".tab_category > a").attr("data-cid")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){listElement.fadeOut("slow",function(){listElement.html(MeoReader.Reader.generateEntryListHTML(data));if(undefined!==MeoReader.settings.audioplayer&&MeoReader.settings.audioplayer===true){MeoReader.createAudioJS();}jQuery(this).fadeIn("slow",function(){MeoReader.loading.stop();if(MeoReader.Reader.currentEntry.length>0){MeoReader.Reader.currentEntry.removeClass("current");}MeoReader.Reader.currentEntry={};});});MeoReader.Reader.updateUnreadButton();MeoReader.Reader.updatePrevNext();}else{MeoReader.loading.stop();listElement.html("<p><i>"+MeoReader.i18n.get("No entries")+"</i></p>");}});}else{jQuery.post(ajaxurl,{action:"meoReader",method:"getArchiveList",pageNr:pageNr},function(response){var data=jQuery.parseJSON(response);if(data.request===true){listElement.fadeOut("slow",function(){listElement.html(MeoReader.Reader.generateEntryListHTML(data));jQuery(this).fadeIn("slow",function(){MeoReader.loading.stop();});});MeoReader.Reader.updateUnreadButton();MeoReader.Reader.updatePrevNext();}else{MeoReader.loading.stop();MeoReader.box.create({id:"MeoReader_Reader_UpdateEntryListView",title:MeoReader.i18n.get("Update Error"),body:data.message,width:400,top:100,button:{ok:{enable:false},cancel:{enable:false},close:{enable:true}},state:"error"});}});}};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click",".tab_markAsRead > a",function(){MeoReader.loading.start();MeoReader.Reader.markAllItemsAsRead();return false;});}else{jQuery(document).delegate(".tab_markAsRead > a","click",function(){MeoReader.loading.start();MeoReader.Reader.markAllitemsAsRead();return false;});}MeoReader.Reader.toggleReadState=function(element){if(element.hasClass("read")){jQuery.post(ajaxurl,{action:"meoReader",method:"markEntryAsUnread",entryID:element.attr("data-entryID")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){if(jQuery("#MeoReader_Reader_List").hasClass("archive")){MeoReader.Reader.updateArchiveListView();}else{MeoReader.Reader.updateEntryListView();}}});}else{jQuery.post(ajaxurl,{action:"meoReader",method:"markEntryAsread",entryID:element.attr("data-entryID")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){if(jQuery("#MeoReader_Reader_List").hasClass("archive")){MeoReader.Reader.updateArchiveListView();}else{MeoReader.Reader.updateEntryListView();}}});}};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click",".MeoReader_Reader_action a.read, .MeoReader_Reader_action a.unread",function(){MeoReader.Reader.toggleReadState(jQuery(this));return false;});}else{jQuery(document).delegate(".MeoReader_Reader_action a.read, .MeoReader_Reader_action a.unread","click",function(){MeoReader.Reader.toggleReadState(jQuery(this));return false;});}MeoReader.Reader.updateTitleTag=function(loading){var current={},isArchive=jQuery("#MeoReader_Reader_List").hasClass("archive")?true:false;if(isArchive===false){current=jQuery(".tab_unread > a").html();if(current.length>0){if(undefined===loading||loading!==true){document.title=current.replace(/\s/g,"")+" meoReader";}else{document.title="(-|-) meoReader";}}}};MeoReader.Reader.updateTitleTag();MeoReader.Reader.updateUnreadButton=function(){jQuery.post(ajaxurl,{action:"meoReader",method:"countUnreadEntries",catID:jQuery(".tab_category > a").attr("data-cid")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){jQuery(".tab_unread > a").html("("+data.totals.category+" / "+data.totals.all+")");MeoReader.Reader.updateTitleTag();}});};MeoReader.Reader.toggleArchiveState=function(entryID){MeoReader.loading.start();jQuery.post(ajaxurl,{action:"meoReader",method:"toggleEntryArchiveState",entryID:entryID,meoNonce:MeoReader.nonce.get("meoReader_toggleArchiveItem")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){if(jQuery("#MeoReader_Reader_List").hasClass("archive")){MeoReader.Reader.updateArchiveListView();}else{MeoReader.Reader.updateEntryListView();}}});};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click","a.action.archive",function(){MeoReader.loading.start();MeoReader.Reader.toggleArchiveState(jQuery(this).attr("data-entryID"));return false;});}else{jQuery(document).delegate("a.action.archive","click",function(){MeoReader.loading.start();MeoReader.Reader.toggleArchiveState(jQuery(this).attr("data-entryID"));return false;});}MeoReader.Reader.updateArchiveListView=function(){var listElement=jQuery("#MeoReader_Reader_List");jQuery.post(ajaxurl,{action:"meoReader",method:"getArchiveList",pageNr:listElement.attr("data-pagenr"),catID:jQuery(".tab_category > a").attr("data-cid")},function(response){var data=jQuery.parseJSON(response);if(data.request===true){listElement.fadeOut("slow",function(){listElement.html(MeoReader.Reader.generateEntryListHTML(data));jQuery(this).fadeIn("slow",function(){MeoReader.loading.stop();});});MeoReader.Reader.updateUnreadButton();}else{MeoReader.loading.stop();listElement.html("<p><i>"+MeoReader.i18n.get("No entries")+"</i></p>");}});};MeoReader.Reader.updateFeedStack=function(){var html="",i=0;if(undefined===MeoReader.box.data.feeds||MeoReader.box.data.feedStack===(MeoReader.box.data.feeds.length)||MeoReader.Reader.active===false){MeoReader.loading.stop();jQuery("#MeoReader_Reader_UpdateFeeds h3").removeClass("loading");jQuery("#MeoReader_UpdateFeed_Progress .current").html(MeoReader.box.data.feedStack);jQuery("#MeoReader_UpdateFeed_Progress .feedName").html("&nbsp;");MeoReader.Reader.updateEntryListView();MeoReader.Reader.updateUnreadButton();if(undefined===MeoReader.box.data.lostFeeds||MeoReader.box.data.lostFeeds.length===0){MeoReader.box.hide();MeoReader.box.reset();}else{html="<p>"+MeoReader.i18n.get("The following feeds could not be refreshed")+":</p>";html+="<ul>";for(i=0;i<MeoReader.box.data.lostFeeds.length;i++){html+='<li style="list-style-type:square;margin-left:1em;">'+MeoReader.box.data.lostFeeds[i]+"</li>";}html+="</ul>";jQuery("#MeoReader_UpdateFeed_Progress").append(html);MeoReader.box.footer.children(".btn.close").html(MeoReader.i18n.get("Close"));}return;}jQuery("#MeoReader_UpdateFeed_Progress .current").html(MeoReader.box.data.feedStack+1);jQuery("#MeoReader_UpdateFeed_Progress .feedName").html(MeoReader.box.data.feeds[MeoReader.box.data.feedStack].name);jQuery.post(ajaxurl,{action:"meoReader",method:"updateFeed",feedID:MeoReader.box.data.feeds[MeoReader.box.data.feedStack].id,meoNonce:MeoReader.nonce.get("meoReader_updateFeed")},function(response){var data=jQuery.parseJSON(response);if(data.request===false){MeoReader.box.data.lostFeeds.push('<a href="'+MeoReader.box.data.feeds[MeoReader.box.data.feedStack].xml_url+'" title="'+data.message+'">'+MeoReader.box.data.feeds[MeoReader.box.data.feedStack].name+'</a> (<a href="admin.php?page=meoreader_feedChecker&feedURL='+MeoReader.box.data.feeds[MeoReader.box.data.feedStack].xml_url+'">check</a>)');}MeoReader.box.data.feedStack+=1;MeoReader.Reader.updateFeedStack();});};MeoReader.Reader.getListOfAllFeeds=function(){jQuery.post(ajaxurl,{action:"meoReader",method:"getListOfAllFeeds"},function(response){var data=jQuery.parseJSON(response);if(data.request===true){MeoReader.box.data.feeds=data.feeds;jQuery("#MeoReader_UpdateFeed_Progress .total").html(MeoReader.box.data.feeds.length);MeoReader.box.data.feedStack=0;MeoReader.Reader.updateFeedStack();}else{MeoReader.loading.stop();MeoReader.box.create({id:"MeoReader_Reader_GetFeedList",title:MeoReader.i18n.get("Error"),body:data.message,width:400,top:100,button:{ok:{enable:false},cancel:{enable:false},close:{enable:true}},state:"error"});}});};MeoReader.Reader.updateFeeds=function(){var bodyContent="<p>"+MeoReader.i18n.get("Depending on how many feeds you have, this might take a while")+".</p>";bodyContent+='<div id="MeoReader_UpdateFeed_Progress"><div class="stack">'+MeoReader.i18n.get("Progress")+": ";bodyContent+='<span class="current">0</span> '+MeoReader.i18n.get("of")+" ";bodyContent+='<span class="total">0</span></div><div class="feedName">&nbsp;</div></div>';MeoReader.box.create({id:"MeoReader_Reader_UpdateFeeds",title:MeoReader.i18n.get("Refreshing Feeds"),body:bodyContent,width:400,top:100,button:{ok:{enable:false},cancel:{enable:false},close:{enable:true,label:MeoReader.i18n.get("Abort")}},state:"neutral"});jQuery("#MeoReader_Reader_UpdateFeeds h3").addClass("loading");MeoReader.box.data.lostFeeds=[];MeoReader.Reader.getListOfAllFeeds();};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click",".tab_reload > a",function(){MeoReader.loading.start();MeoReader.Reader.active=true;MeoReader.Reader.updateFeeds();return false;});}else{jQuery(document).delegate(".tab_reload > a","click",function(){MeoReader.loading.start();MeoReader.Reader.updateFeeds();return false;});}jQuery("h2").click(function(){location.href="admin.php?page=meoreader_index&pageNr=1";});if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click","#MeoReader_Reader_UpdateFeeds .btn_close, #MeoReader_Reader_UpdateFeeds .btn.close, #MeoReader_Reader_UpdateFeeds .btn.cancel",function(){MeoReader.Reader.active=false;});}else{jQuery(document).delegate("#MeoReader_Reader_UpdateFeeds .btn_close, #MeoReader_Reader_UpdateFeeds .btn.close, #MeoReader_Reader_UpdateFeeds .btn.cancel","click",function(){MeoReader.Reader.active=false;});}jQuery(document).ready(function(){if(jQuery(window).width()<1280){jQuery('#MeoReader_Reader_SearchForm input[type="text"]').css("width","85px");}});MeoReader.Reader.placeholder={};MeoReader.Reader.loadPlaceholderContent=function(data){var content="";data.replace(/<!--\[meoreader\](.*)\[\/meoreader\]-->/gi,function(match,extraction){if(match){match=null;}content=extraction;});return content;};MeoReader.Reader.placeholder.show=function(wrapperElement){var item=wrapperElement.children(".meoReader_placeholder"),content=MeoReader.Reader.loadPlaceholderContent(item.html());if(content!==""){wrapperElement.html(content).removeClass(".meoReader_placeholderWrap");}};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click",".meoReader_placeholderWrap",function(){MeoReader.Reader.placeholder.show(jQuery(this));return false;});}else{jQuery(document).delegate(".meoReader_placeholderWrap","click",function(){MeoReader.Reader.placeholder.show(jQuery(this));return false;});}MeoReader.Reader.createPostFromEntry=function(entryID){jQuery.post(ajaxurl,{action:"meoReader",method:"createPostFromEntry",entryID:entryID},function(response){var data=jQuery.parseJSON(response);if(data.request===true){if(data.postEditor!==undefined&&data.postEditor===true){window.location="post.php?post="+data.postID+"&action=edit";}else{jQuery('.meoReader_entryToolbar[data-entryID="'+entryID+'"] > a.meoReader_createPostFromEntry').html(MeoReader.i18n.get("Post has been created"));}}else{jQuery('.meoReader_entryToolbar[data-entryID="'+entryID+'"] > a.meoReader_createPostFromEntry').html(MeoReader.i18n.get("Post could not be created!"));}});};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click","a.meoReader_createPostFromEntry",function(){if(jQuery(this).html()!==MeoReader.i18n.get("Post has been created")){MeoReader.Reader.createPostFromEntry(jQuery(this).parent().attr("data-entryID"));}return false;});}else{jQuery(document).delegate("a.meoReader_createPostFromEntry","click",function(){if(jQuery(this).html()!==MeoReader.i18n.get("Post has been created")){MeoReader.Reader.createPostFromEntry(jQuery(this).parent().attr("data-entryID"));}return false;});}MeoReader.openLinksInNewWindow=function(link){var url="";if(!link.hasClass(".button-secondary")){link.attr("target","_blank");if(undefined!==MeoReader.settings.anonymousLinks&&MeoReader.settings.anonymousLinks===true){url=link.attr("href");link.attr("href","http://anonym.to/?"+url);}}};if(MeoReader.compareVersions(MeoReader.jQueryVersion,"1.7.0")===-1){jQuery(document).on("click",".MeoReader_Reader_content a",function(){if(undefined!==jQuery(this).attr("href")&&jQuery(this).attr("href")!==""){MeoReader.openLinksInNewWindow(jQuery(this));}else{return false;}});}else{jQuery(document).delegate(".MeoReader_Reader_content a","click",function(){if(undefined!==jQuery(this).attr("href")&&jQuery(this).attr("href")!==""){MeoReader.openLinksInNewWindow(jQuery(this));}else{return false;}});}MeoReader.Reader.toggleTimeRange=function(){var element=jQuery(".tab_today a"),label_today=element.attr("data-labeltoday"),label_alltime=element.attr("data-labelalltime");if(undefined===MeoReader.Reader.timeRangeState){MeoReader.Reader.timeRangeState=element.hasClass("today")?"today":"alltime";}MeoReader.Reader.timeRangeState=(MeoReader.Reader.timeRangeState==="today")?"alltime":"today";if(MeoReader.Reader.timeRangeState==="today"){element.text(label_alltime).addClass("today");}else{element.text(label_today).removeClass("today");}jQuery.post(ajaxurl,{action:"meoReader",method:"toggleTimeRange"},function(response){var data=jQuery.parseJSON(response);if(data.request===true){MeoReader.Reader.updateEntryListView(true);MeoReader.Reader.updatePrevNextView();}});};jQuery(".tab_today a").click(function(){MeoReader.Reader.toggleTimeRange();return false;});MeoReader.Reader.shortcuts={};MeoReader.Reader.shortcuts.setCurrentEntry=function(element){if(undefined===element||element.length===0){if(!jQuery.isEmptyObject(MeoReader.Reader.currentEntry)){MeoReader.Reader.currentEntry.removeClass("current");}MeoReader.Reader.currentEntry=jQuery("#MeoReader_Reader_List .MeoReader_Reader_item").first();MeoReader.Reader.currentEntry.addClass("current");}else{if(!jQuery.isEmptyObject(MeoReader.Reader.currentEntry)){MeoReader.Reader.currentEntry.removeClass("current");}MeoReader.Reader.currentEntry=element;MeoReader.Reader.currentEntry.addClass("current");}};MeoReader.Reader.shortcuts.selectNextEntry=function(){var nextItem={};if(jQuery.isEmptyObject(MeoReader.Reader.currentEntry)){MeoReader.Reader.shortcuts.setCurrentEntry();}else{nextItem=MeoReader.Reader.currentEntry.next().next();if(jQuery.isEmptyObject(nextItem)){MeoReader.Reader.shortcuts.setCurrentEntry();}else{MeoReader.Reader.shortcuts.setCurrentEntry(nextItem);}}};MeoReader.Reader.shortcuts.selectPreviousEntry=function(){var prevItem={};if(jQuery.isEmptyObject(MeoReader.Reader.currentEntry)){MeoReader.Reader.shortcuts.setCurrentEntry(jQuery("#MeoReader_Reader_List .MeoReader_Reader_item").last());}else{prevItem=MeoReader.Reader.currentEntry.prev().prev();if(jQuery.isEmptyObject(prevItem)||prevItem.length===0){MeoReader.Reader.shortcuts.setCurrentEntry(jQuery("#MeoReader_Reader_List .MeoReader_Reader_item").last());}else{MeoReader.Reader.shortcuts.setCurrentEntry(prevItem);}}};jQuery(document).keyup(function(e){var tmp;if(e.keyCode===32||e.keyCode===107){MeoReader.Reader.shortcuts.selectNextEntry();MeoReader.Reader.toggleEntry(MeoReader.Reader.currentEntry);MeoReader.Reader.markElementAsRead(MeoReader.Reader.currentEntry);}if(e.keyCode===109){MeoReader.Reader.shortcuts.selectPreviousEntry();MeoReader.Reader.toggleEntry(MeoReader.Reader.currentEntry);MeoReader.Reader.markElementAsRead(MeoReader.Reader.currentEntry);}if(e.keyCode===74){MeoReader.Reader.shortcuts.selectNextEntry();}if(e.keyCode===75){MeoReader.Reader.shortcuts.selectPreviousEntry();}if(e.keyCode===79||e.keyCode===13){if(!jQuery.isEmptyObject(MeoReader.Reader.currentEntry)){MeoReader.Reader.toggleEntry(MeoReader.Reader.currentEntry);}}if(e.keyCode===82){if(e.shiftKey){MeoReader.Reader.markAllItemsAsRead();}else{if(!jQuery.isEmptyObject(MeoReader.Reader.currentEntry)){MeoReader.Reader.toggleReadState(MeoReader.Reader.currentEntry);}}}if(e.keyCode===65){if(!jQuery.isEmptyObject(MeoReader.Reader.currentEntry)){tmp=MeoReader.Reader.currentEntry.attr("data-entryID");MeoReader.Reader.toggleArchiveState(tmp);}}if(e.keyCode===84){MeoReader.Reader.toggleTimeRange();}if(e.keyCode===85){MeoReader.loading.start();MeoReader.Reader.active=true;MeoReader.Reader.updateFeeds();}if(e.keyCode===27){MeoReader.Reader.active=false;}});
